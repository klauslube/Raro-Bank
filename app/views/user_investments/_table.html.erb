<h1><%= t('.investment_title') %></h1>
<%= link_to 'Investments Catalog', catalogs_path %>

<%= search_form_for @q do |f| %>
  <%= f.label :investment_name_cont, 'Nome:' %>
  <%= f.search_field :investment_name_cont %>

  <%= f.label :investment_minimum_amount_gteq, 'Valor MÃ­nimo:' %>
  <%= f.number_field :investment_minimum_amount_gteq, min: 0 %>

  <%= f.label :investment_indicator_rate_gteq, 'Valor indexador:' %>
  <%= f.number_field :investment_indicator_rate_gteq %>

  <%= f.label :investment_premium_eq, 'Premium:' %>
  <%= f.check_box :investment_premium_eq %>

  <%= f.label :investment_expiration_date_eq, 'Data de Vencimento:' %>
  <%= f.date_field :investment_expiration_date_eq %>

  <%= f.submit %>
  <%= button_tag 'Limpar Filtros', type: :button, onclick: 'window.location.href = window.location.pathname' %>
<% end %>

<table>
  <thead>
    <tr>
      <th scope="col"><%= t('.name') %></th>
      <th scope="col"><%= t('.min_amount') %></th>
      <th scope="col">Expiration Date</th>
      <th scope="col">Index</th>
      <th scope="col"><%= t('.category') %></th>
      <th scope="col"><%= t('.profit') %></th>
      <th scope="col">Initial amount</th>
      <th scope="col"><%= t('.purchase_date') %></th>
    </tr>
  </thead>
  <tbody>
    <% @user_investments.each do |investment| %>
      <tr>
        <td><%= investment.investment.name %></td>
        <td><%= investment.investment.minimum_amount %></td>
        <td><%= investment.investment.expiration_date %></td>
        <td><%= "#{(investment.investment.indicator.rate * 100 * 365).round(2)}%" %></td> 
        <td><%= investment.investment.premium ? 'Premium' : 'Free' %> 
        <td><%= investment.profit %></td>
        <td><%= investment.initial_amount %></td>
        <td><%= investment.created_at.strftime('%d/%m/%y') %></td>
        <td><%= link_to "Detalhes", user_investment_path(investment) %></td>
      </tr>
    <% end %>
  </tbody>
</table>